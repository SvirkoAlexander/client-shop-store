{"ast":null,"code":"import _slicedToArray from\"/Users/sasha/Desktop/Shop-headphone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{MdClose}from\"react-icons/md\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import useFetch from\"../../../hooks/useFetch\";import\"./Search.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(_ref){var _data,_data$data;var setShowSearch=_ref.setShowSearch;var _useState=useState(),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var navigate=useNavigate();var onChange=function onChange(e){setQuery(e.target.value);};var _useFetch=useFetch(\"/api/products?populate=*&filters[title][$contains]=\".concat(query)),data=_useFetch.data;if(!(query!==null&&query!==void 0&&query.length)){data=null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"search-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",autoFocus:true,placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\",value:query,onChange:onChange}),/*#__PURE__*/_jsx(MdClose,{onClick:function onClick(){return setShowSearch(false);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-result-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:(_data=data)===null||_data===void 0?void 0:(_data$data=_data.data)===null||_data$data===void 0?void 0:_data$data.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-item\",onClick:function onClick(){navigate('/product/'+item.id);setShowSearch(false);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.REACT_APP_DEV_URL+item.attributes.img.data[0].attributes.url,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"prod-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:item.attributes.title}),/*#__PURE__*/_jsx(\"span\",{className:\"desc\",children:item.attributes.desc})]})]},item.id);})})})]});};export default Search;","map":{"version":3,"names":["MdClose","useState","useNavigate","useFetch","jsx","_jsx","jsxs","_jsxs","Search","_ref","_data","_data$data","setShowSearch","_useState","_useState2","_slicedToArray","query","setQuery","navigate","onChange","e","target","value","_useFetch","concat","data","length","className","children","type","autoFocus","placeholder","onClick","map","item","id","src","process","env","REACT_APP_DEV_URL","attributes","img","url","alt","title","desc"],"sources":["/Users/sasha/Desktop/Shop-headphone/client/src/components/Header/Search/Search.jsx"],"sourcesContent":["import { MdClose } from \"react-icons/md\";\n\n\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport useFetch from \"../../../hooks/useFetch\";\nimport \"./Search.scss\";\n\nconst Search = ({ setShowSearch }) => {\n  const [query, setQuery] = useState();\n  const navigate = useNavigate();\n\n  const onChange = (e) => {\n    setQuery(e.target.value);\n  };\n\n  let { data } = useFetch(\n    `/api/products?populate=*&filters[title][$contains]=${query}`\n  );\n  if (!query?.length) {\n    data = null;\n  }\n  return (\n    <div className=\"search-modal\">\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          autoFocus\n          placeholder=\"Поиск по товарам\"\n          value={query}\n          onChange={onChange}\n        />\n        <MdClose onClick={() => setShowSearch(false)} />\n      </div>\n      <div className=\"search-result-content\">\n        <div className=\"search-results\">\n\t\t\t\t\t{data?.data?.map(item => (\n\t\t\t\t\t\t<div key={item.id} className=\"search-result-item\" onClick={() => {\n\t\t\t\t\t\t\tnavigate('/product/' + item.id)\n\t\t\t\t\t\t\tsetShowSearch(false)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}}>\n            <div className=\"img-container\">\n              <img src={process.env.REACT_APP_DEV_URL +\n                item.attributes.img.data[0].attributes.url} alt=\"\" />\n            </div>\n            <div className=\"prod-details\">\n              <span className=\"name\">{item.attributes.title}</span>\n              <span className=\"desc\">{item.attributes.desc}</span>\n            </div>\n          </div>\n\t\t\t\t\t\t\n\t\t\t\t\t))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"],"mappings":"gIAAA,OAASA,OAAO,KAAQ,gBAAgB,CAGxC,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,QAAQ,KAAM,yBAAyB,CAC9C,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvB,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAAC,IAAA,CAA0B,KAAAC,KAAA,CAAAC,UAAA,IAApB,CAAAC,aAAa,CAAAH,IAAA,CAAbG,aAAa,CAC7B,IAAAC,SAAA,CAA0BZ,QAAQ,EAAE,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,GAAM,CAAAI,QAAQ,CAAGhB,WAAW,EAAE,CAE9B,GAAM,CAAAiB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,CAAC,CAAK,CACtBH,QAAQ,CAACG,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC1B,CAAC,CAED,IAAAC,SAAA,CAAepB,QAAQ,uDAAAqB,MAAA,CACiCR,KAAK,EAC5D,CAFKS,IAAI,CAAAF,SAAA,CAAJE,IAAI,CAGV,GAAI,EAACT,KAAK,SAALA,KAAK,WAALA,KAAK,CAAEU,MAAM,EAAE,CAClBD,IAAI,CAAG,IAAI,CACb,CACA,mBACElB,KAAA,QAAKoB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BrB,KAAA,QAAKoB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBvB,IAAA,UACEwB,IAAI,CAAC,MAAM,CACXC,SAAS,MACTC,WAAW,CAAC,wFAAkB,CAC9BT,KAAK,CAAEN,KAAM,CACbG,QAAQ,CAAEA,QAAS,EACnB,cACFd,IAAA,CAACL,OAAO,EAACgC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAApB,aAAa,CAAC,KAAK,CAAC,EAAC,EAAG,GAC5C,cACNP,IAAA,QAAKsB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCvB,IAAA,QAAKsB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAAAlB,KAAA,CACjCe,IAAI,UAAAf,KAAA,kBAAAC,UAAA,CAAJD,KAAA,CAAMe,IAAI,UAAAd,UAAA,iBAAVA,UAAA,CAAYsB,GAAG,CAAC,SAAAC,IAAI,qBACpB3B,KAAA,QAAmBoB,SAAS,CAAC,oBAAoB,CAACK,OAAO,CAAE,SAAAA,QAAA,CAAM,CAChEd,QAAQ,CAAC,WAAW,CAAGgB,IAAI,CAACC,EAAE,CAAC,CAC/BvB,aAAa,CAAC,KAAK,CAAC,CAErB,CAAE,CAAAgB,QAAA,eACIvB,IAAA,QAAKsB,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BvB,IAAA,QAAK+B,GAAG,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CACrCL,IAAI,CAACM,UAAU,CAACC,GAAG,CAAChB,IAAI,CAAC,CAAC,CAAC,CAACe,UAAU,CAACE,GAAI,CAACC,GAAG,CAAC,EAAE,EAAG,EACnD,cACNpC,KAAA,QAAKoB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BvB,IAAA,SAAMsB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEM,IAAI,CAACM,UAAU,CAACI,KAAK,EAAQ,cACrDvC,IAAA,SAAMsB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEM,IAAI,CAACM,UAAU,CAACK,IAAI,EAAQ,GAChD,GAZFX,IAAI,CAACC,EAAE,CAaP,EAEV,CAAC,EACO,EACF,GACF,CAEV,CAAC,CAED,cAAe,CAAA3B,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}